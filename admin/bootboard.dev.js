var ge=!1;GOOGLE_API_CLIENT_ID||alert('You must set de var GOOGLE_API_CLIENT_ID before to load "bootsboard.js" with your client ID. Set up your client ID in Google Apis Console'),gapi.analytics.ready(function(){gapi.analytics.createComponent("2dimensions",{initialize:function(){},execute:function(){var e=this,t=setInterval(function(){window.google&&window.google.visualization&&window.google.visualization.DataTable&&(e.executeOnLoad(),clearInterval(t))},500)},executeOnLoad:function(){var e=this.get(),t=new gapi.analytics.report.Data({query:e.query});t.container=e.chart.container,t.type=e.chart.type.charAt(0).toUpperCase()+e.chart.type.substr(1).toLowerCase(),t.options=e.chart.options,t.on("success",function(e){var t=new google.visualization.DataTable,a=ge.reformatRows(e.rows,this.options.maxvalues?this.options.maxvalues:99,this.options.stacked&&"percent"==this.options.stacked?1:0);t.addColumn(e.columnHeaders[0].dataType.toLowerCase(),e.columnHeaders[0].name.replace("ga:",""));for(var r=0;r<a.cols.length;r++)t.addColumn("number",a.cols[r]);t.addRows(a.rows);var s=new google.visualization[this.type+"Chart"](document.getElementById(this.container));this.options.stacked&&(this.options.isStacked=!0,"percent"==this.options.stacked&&(this.options.vAxis={minValue:0,maxValue:100,viewWindow:{min:0,max:100}})),this.options.legend={position:"top",maxLines:3},s.draw(t,this.options)}),t.execute()}}),gapi.analytics.createComponent("advancedMetrics",{initialize:function(){this.id="am-"+ge.getRand()},execute:function(){var e=this,t=setInterval(function(){window.google&&window.google.visualization&&window.google.visualization.DataTable&&(e.executeOnLoad(),clearInterval(t))},500)},executeOnLoad:function(){{var e=this.get(),t={counter:0,queries:{},results:{},o:e};e.chart.options}t.draw=function(){var e=new google.visualization.DataTable;if(this.o.query.dimensions){for(var t in this.queries){e.addColumn(this.results[t].columnHeaders[0].dataType.toLowerCase(),this.results[t].columnHeaders[0].name.replace("ga:",""));break}var a={};for(var t in this.queries){e.addColumn("number",t);for(var r=0;r<this.results[t].rows.length;r++)a[this.results[t].rows[r][0]]||(a[this.results[t].rows[r][0]]={}),a[this.results[t].rows[r][0]][t]=this.results[t].rows[r][1]}var s=[];for(var t in a){var n=[t];if(this.o.chart.options.stacked&&"percent"==this.o.chart.options.stacked){var o=0;for(var r in a[t])o+=1*a[t][r];for(var r in a[t])n.push(Math.round(a[t][r]/o*1e3,2)/10)}else for(var r in a[t])n.push(1*a[t][r]);s.push(n)}}else{e.addColumn("string",""),e.addColumn("number","");var s=[];for(var t in this.queries)s.push([t,1*this.results[t].rows[0][0]])}e.addRows(s),this.o.chart.type=this.o.chart.type.charAt(0).toUpperCase()+this.o.chart.type.substr(1).toLowerCase();var i=new google.visualization[this.o.chart.type+"Chart"](document.getElementById(this.o.chart.container));this.o.chart.options.stacked&&(this.o.chart.options.isStacked=!0,"percent"==this.o.chart.options.stacked&&(this.o.chart.options.vAxis={minValue:0,maxValue:100,viewWindow:{min:0,max:100}})),this.o.chart.options.legend={position:"top",maxLines:3},i.draw(e,this.o.chart.options)};for(var a in e.am){var r=jQuery.extend({},e.query);r.metrics=e.am[a].metric,r.segment||(r.segment=""),r.segment=ge.deleteVoids(r.segment.replace("dynamic::","")+";"+e.am[a].segment),r.segment?r.segment="dynamic::"+r.segment:delete r.segment,t.queries[a]=new gapi.analytics.report.Data({query:r}),t.counter++,t.queries[a].parent=t,t.queries[a].qi=a,t.queries[a].on("success",function(e){this.parent.counter--,this.parent.results[this.qi]=e}),t.queries[a].execute()}var s=setInterval(function(){0==t.counter&&(t.draw(),clearInterval(s))},500)}}),gapi.analytics.createComponent("METRIC",{initialize:function(){},execute:function(){this.set({query:{ids:ge.view.ids}});var e=this.get(),t={results:{},counter:1,tv:"firstData"},a=jQuery.extend({},e.query);if("countrows"==a.metrics&&(a.metrics="ga:sessions",delete a.sort,t.tv="countrows"),t.query=new gapi.analytics.report.Data({query:a}),e.comparedQuery){t.counter++;var r={};for(var s in e.comparedQuery)r[s]=e.comparedQuery[s];for(var s in a)r[s]||(r[s]=e.query[s]);t.compared=new gapi.analytics.report.Data({query:r})}t.target=$("#"+e.chart.container),t.options=e.chart.options,t.query.on("success",function(e){t.results.query=e,t.counter--}),t.compared&&t.compared.on("success",function(e){t.results.compared=e,t.counter--});var n=setInterval(function(){0==t.counter&&(t.draw(),clearInterval(n))},500);t.draw=function(){if(this.options["compared-invertcolors"]&&"no"!=this.options["compared-invertcolors"])var e="red",t="green";else var e="green",t="red";var a=this.options.colors[0]?" color:"+this.options.colors[0]+"; ":"";if("countrows"==this.tv)var r=1*this.results.query.totalResults,s=this.results.compared?1*this.results.compared.totalResults:0;else var r=1*this.results.query.rows[0][0],s=this.results.compared?1*this.results.compared.rows[0][0]:0;var n=Math.round(r/s*100)/100,o=Math.round(r/s*1e4)/100+"%",i=Math.round(100*(r/s-1))/100;i=i>=0?'<span class="'+e+'">▲</span> '+i:'<span class="'+t+'">▼</span>'+-1*i;var c=Math.round(1e4*(r/s-1))/100;c=c>=0?'<span class="'+e+'">▲</span> '+c+"%":'<span class="'+t+'">▼</span>'+-1*c+"%";var l=Math.round(100*(r-s))/100;l=l>=0?'<span class="'+e+'">▲</span> '+l:'<span class="'+t+'">▼</span>'+-1*l,r=ge.numberFormat(r),s=ge.numberFormat(s);var d=this.options.template?this.options.template.replace("{data}",r).replace("{compared}",s).replace("{ratio}",n).replace("{percent}",o).replace("{ratiochange}",i).replace("{percentchange}",c).replace("{diff}",l):r,h=this.options.title?this.options.title.replace("{data}",r).replace("{compared}",s).replace("{ratio}",n).replace("{percent}",o).replace("{ratiochange}",i).replace("{percentchange}",c).replace("{diff}",l):s;this.target.html('<div class="metricbox"><span class="data" style="'+a+'">'+d+'</span><span class="title" >'+h+"</span></div>")},t.query.execute(),t.compared&&t.compared.execute()}}),gapi.analytics.createComponent("SOCIALCOUNT",{initialize:function(){},execute:function(){var e=this.get();switch(e.query.metrics){case"likes":$.getJSON("https://graph.facebook.com/?id="+e.chart.options.url,this.render(e.chart,"shares"))}},render:function(e,t){return function(a){var r=a[t];if(r){var s=e.options.colors[0]?" color:"+e.options.colors[0]+"; ":"",n=e.options.template?e.options.template.replace("{data}",ge.numberFormat(r)):ge.numberFormat(r);$("#"+e.container).html('<div class="metricbox"><span class="data" style="'+s+'">'+n+'</span><span class="title" >'+e.options.title+"</span></div>")}}}}),gapi.analytics.auth.authorize({container:"auth-button",clientid:GOOGLE_API_CLIENT_ID,userInfoLabel:""}),ge={auth:gapi.analytics.auth,view:!1,charts:[],globalSegment:"",globalView:"",segmentSelectors:[],intervals:{},loaded:!1,nativeCharts:["PIE","LINE","AREA","COLUMN","BAR","TABLE","GEO"],extraCharts:["METRIC"],setGlobalSegment:function(e){ge.globalSegment=e,ge.segmentChange()},setView:function(e){ge.globalView="ga:"+e.replace("ga:",""),ge.viewChange()},numberFormat:function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t[1]&&(t[1]=t[1].substring(0,2)),t.join(".")},reformatRows:function(e,t,a){for(var r={},s=[],n=[],o=0;o<e.length;o++)-1==s.indexOf(e[o][1])&&s.push(e[o][1]),r[e[o][0]]||(r[e[o][0]]={}),r[e[o][0]][e[o][1]]=1*e[o][2],n[e[o][0]]?n[e[o][0]]+=1*e[o][2]:n[e[o][0]]=1*e[o][2];var i=[];for(var o in r){var c=[o];for(var l in s){var d=r[o][s[l]]?r[o][s[l]]:0;a&&(d=Math.round(d/n[o]*1e3,2)/10),t>l?c.push(d):c[t]?c[t]+=d:c[t]=d}i.push(c)}for(var h=[],g=!1,o=0;o<s.length;o++)t-1>o?h.push(s[o]):g=!0;return g&&h.push("others"),{cols:h,rows:i}},init:function(){$("#dashboard").data("segment")&&ge.setGlobalSegment($("#dashboard").data("segment")),$("#dashboard").data("view")&&ge.setView($("#dashboard").data("view")),$("#view-selector")[0]&&(ge.view=new gapi.analytics.ViewSelector({container:"view-selector"})),ge.auth.on("success",ge.logged),ge.view&&ge.view.on("change",ge.setView),ge.parseCharts(),ge.parseSegmentSelectors(),ge.parseChartControls(),ge.loaded=!0},logged:function(){ge.view&&ge.view.execute()},viewChange:function(){for(var e=0;e<ge.charts.length;e++)ge.charts[e].chart.set({query:{ids:ge.globalView}}).execute()},segmentChange:function(){if(ge.loaded)for(var e=0;e<ge.charts.length;e++)ge.charts[e].chart.set({query:{segment:ge.calcSegment(ge.charts[e])}}).execute()},calcSegment:function(e){var t=ge.getChartData(e,"segment").replace("dynamic::","")+";"+ge.globalSegment;for(var a in ge.segmentSelectors)t+=";"+ge.segmentSelectors[a];return t=ge.deleteVoids(t),t&&(t="dynamic::"+t),t},getChartData:function(e,t){return e.data.query[t]?e.data.query[t]:""},deleteVoids:function(e){var t=e.split(";");e=[];for(var a=0;a<t.length;a++)t[a]&&e.push(t[a]);return e.join(";")},ensureId:function(e){$el=$(e),$el.attr("id")||$el.attr("id","autogenerated-"+ge.getRand())},getRand:function(){return Math.floor(1e19*Math.random()+1)},parseCharts:function(){var e=$("#dashboard .ga-chart");e.each(function(e,t){ge.loadChart(t)})},loadChart:function(e){var t=$(e);ge.ensureId(t),t.html("");var a={reportType:"ga",query:{ids:ge.globalView},chart:{container:t.attr("id"),type:t.data("type").toUpperCase(),options:{title:t.attr("title"),fontSize:12,width:t.width(),height:t.height()}}};"DONUT"==a.chart.type&&(a.chart.type="PIE",a.chart.options.pieHole=.4);for(var r=["dimensions","metrics","filter","samplingLevel"],s=0;s<r.length;s++)t.data(r[s])&&(a.query[r[s]]=t.data(r[s]));t.data("start-date")&&(a.query["start-date"]=ge.smartDates(t.data("start-date"))),t.data("end-date")&&(a.query["end-date"]=ge.smartDates(t.data("end-date"))),t.data("segment")&&(a.query.segment="dynamic::"+t.data("segment")),t.data("sort")?a.query.sort=t.data("sort"):"AREA"!=a.chart.type&&"LINE"!=a.chart.type&&a.query.metrics&&(a.query.sort="-"+a.query.metrics);for(var r=["template","url","maxvalues","stacked","compared-invertcolors"],s=0;s<r.length;s++)t.data(r[s])&&(a.chart.options[r[s]]=t.data(r[s]));t.data("colors")&&(a.chart.options.colors=t.data("colors").split(","));for(var r=["compared-metric","compared-segment","compared-filter"],s=0;s<r.length;s++)t.data(r[s])&&(a.comparedQuery||(a.comparedQuery={}),a.comparedQuery[r[s].replace("compared-","")]=t.data(r[s]));t.data("compared-date")&&(a.comparedQuery||(a.comparedQuery={}),a.comparedQuery["start-date"]=ge.smartDates(t.data("compared-date"),a.query["start-date"]),a.comparedQuery["end-date"]=ge.smartDates(t.data("compared-date"),a.query["end-date"]));for(var n={},o=!1,s=1;10>=s;s++)if(t.data("name"+s)&&t.data("metric"+s)){n[t.data("name"+s)]={metric:t.data("metric"+s),segment:t.data("segment"+s)};var o=!0}ge.nativeCharts.indexOf(a.chart.type)>-1?a.query.dimensions&&a.query.dimensions.indexOf(",")>-1&&!o?ge.charts.push({chart:new gapi.analytics.ext["2dimensions"](a),data:a}):a.query.dimensions&&!o?("AREA"==a.chart.type&&(a.chart.type="LINE"),ge.charts.push({chart:new gapi.analytics.googleCharts.DataChart(a),data:a})):(a.am=n,ge.charts.push({chart:new gapi.analytics.ext.advancedMetrics(a),data:a})):gapi.analytics.ext[a.chart.type]?ge.charts.push({chart:new gapi.analytics.ext[a.chart.type](a),data:a}):console.error("chart type "+a.chart.type+" not found")},parseSegmentSelectors:function(){var e=$(".segment-selector");e.each(function(e,t){var a=$(t);ge.ensureId(a);var r=a.data("template")?a.data("template"):"{value}";ge.segmentSelectors[a.attr("id")]=r.replace("{value}",a.val()),a.change(function(){a=$(this);var e=a.data("template")?a.data("template"):"{value}";ge.segmentSelectors[a.attr("id")]=e.replace("{value}",a.val()),ge.segmentChange()}),ge.segmentChange()})},parseChartControls:function(){$(".ga-chart-control").change(function(){var e=$(this);ge.ensureId(e);var t=e.data("queryvar"),a=e.val();if("all"==e.data("targetids")){var r=[];$(".ga-chart").each(function(e,t){r.push($(t).attr("id"))})}else var r=e.data("targetids").split(",");for(var s=($("option:selected",e).data("colors")?$("option:selected",e).data("colors").split(","):!1,0);s<r.length;s++){$c=$("#"+r[s]),$c.data(t,a),ge.loadChart($c);for(var n=0;n<ge.charts.length;n++)ge.charts[n].data.chart.container==r[s]&&ge.charts[n].chart.execute()}})},smartDates:function(e,t){if(-1==e.indexOf("-"))return e;if(t)t=t.split("-"),t=new Date(t[0],t[1]-1,t[2]);else var t=new Date;e=e.split("(-").join("(_").split("-"),t=[t.getFullYear(),t.getMonth()+1,t.getDate()];for(var a=0;a<e.length;a++)if("("==e[a].substring(0,1)&&")"==e[a].substring(e[a].length-1)){var r=1*e[a].match(/\d+/)[0];e[a]="_"==e[a].substring(1,2)?1*t[a]-r:1*t[a]+r}else e[a]=1*e[a].match(/\d+/)[0];return e=new Date(e[0],e[1]-1,e[2]),e=e.getFullYear()+"-"+(e.getMonth()>8?e.getMonth()+1:"0"+(e.getMonth()+1))+"-"+(e.getDate()>9?e.getDate():"0"+e.getDate())}},ge.init()}),document.write("<style>#dashboard {margin-top:30px; }#view-selector { width:100%}#view-selector > table {display:inline-block;}#view-selector > table td{display:inline; padding-right:10px; }.ga-chart {height:300px;}.ga-chart.xsmall-height {height:75px;}.ga-chart.small-height {height:150px;}.ga-chart.big-height {height:450px;}.metricbox{margin:15px 30px 0 0; text-align:right;}.metricbox .data{display:block; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 40px; font-weight: 500; height:50px; line-height: 50px; }.metricbox .title{color:#777;}.ga-chart-control { margin-bottom:5px; }.ga-chart .green { color:green; }.ga-chart .red { color:red }</style>");